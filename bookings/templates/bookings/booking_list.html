{% extends 'base.html' %}

{% block content %}
  <h1>Your Bookings</h1>
  <a href="{% url 'booking_create' %}">Create New Booking</a>

  {% if bookings %}
    <ul>
      {% for booking in bookings %}
        <li>
          <h3><a href="{% url 'booking_detail' booking.pk %}">{{ booking.first_name }} {{ booking.last_name }} - {{ booking.booking_date }} at {{ booking.booking_time }}</a></h3>

          {% if booking.user == request.user or request.user.is_staff %}
            <a href="{% url 'booking_update' booking.pk %}">Edit</a> |
            <form action="{% url 'booking_delete' booking.pk %}" method="POST" style="display:inline;">
              {% csrf_token %}
              <button type="submit" onclick="return confirm('Are you sure you want to delete this booking?');">Delete</button>
            </form>
          {% endif %}
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>No bookings found.</p>
  {% endif %}
{% endblock %}