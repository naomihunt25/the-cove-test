{% extends 'base.html' %}

{% block title %}Your Bookings - The Cove{% endblock %}

{% block content %}
<section class="container mt-5 mb-5">
  <h1>Your Bookings</h1>
  <a href="{% url 'booking_create' %}" class="btn btn-success mb-3">Create New Booking</a>

  {% if bookings %}
    <ul class="list-group">
      {% for booking in bookings %}
        <li class="list-group-item">
          <h3><a href="{% url 'booking_detail' booking.pk %}">{{ booking.first_name }} {{ booking.last_name }} - {{ booking.booking_date }} at {{ booking.booking_time }}</a></h3>

          {% if booking.user == request.user or request.user.is_staff %}
            <a href="{% url 'booking_update' booking.pk %}" class="btn btn-sm btn-outline-primary">Edit</a>
            <form action="{% url 'booking_delete' booking.pk %}" method="POST" style="display:inline;">
              {% csrf_token %}
              <button type="submit" class="btn btn-sm btn-outline-danger" onclick="return confirm('Are you sure?');">Delete</button>
            </form>
          {% endif %}
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>No bookings found.</p>
  {% endif %}
</section>
{% endblock %}